{# Редактирование контакта #}
{% extends 'base.twig' %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="../../public/css/contacts.css">
{% endblock %}

{% block content %}
    <div class="head-page">
        <div class="title col-12">Редактирование контакта</div>
    </div>
    <div class="body-page">
        <div class="contact-item">
            <form action="/contact/update/{{ contact['contact_id'] }}" name="update_contact" method="post">
                <div class="info">
                    <div class="row">
                        <div class="col-8 label-input">
                            <label for="contact-parent" title="Обязательное поле">Родитель *</label>
                            <input type="text" name="parent_name" id="contact-parent" class="parent-name{% if errors['parent_name'] is defined %} error{% endif %}" placeholder="Фамилия, имя и отчество" value="{% if memo['parent_name'] is defined %}{{ memo['parent_name'] }}{% else %}{{ contact['parent_name'] }}{% endif %}">
                        </div>
                        <div class="col-4 label-input">
                            <label for="contact-phone" title="Обязательное поле">Телефон *</label>
                            <input type="text" name="parent_phone" id="contact-phone" class="parent-phone{% if errors['parent_phone'] is defined %} error{% endif %}" placeholder="Контактный телефон" value="{% if memo['parent_phone'] is defined %}{{ memo['parent_phone'] }}{% else %}{{ contact['parent_phone'] }}{% endif %}">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6 label-input">
                            <label for="contact-pupil" title="Обязательное поле">Ученик *</label>
                            <input type="text" name="pupil" id="contact-pupil" class="pupil{% if errors['pupil'] is defined %} error{% endif %}" placeholder="Имя ученика" value="{% if memo['pupil'] is defined %}{{ memo['pupil'] }}{% else %}{{ contact['pupil'] }}{% endif %}">
                        </div>
                        <div class="col-2 label-input">
                            <label for="contact-balance" title="Обязательное поле">Баланс *</label>
                            <input type="text" name="current_value" id="contact-balance" class="current-value{% if errors['current_value'] is defined %} error{% endif %}" placeholder="Сумма баланса" value="{% if memo['current_value'] is defined %}{{ memo['current_value'] }}{% else %}{{ contact['current_value'] }}{% endif %}">
                        </div>
                        <div class="col-2 label-input">
                            <label for="contact-rate" title="Обязательное поле">Тариф *</label>
                            <input type="text" name="rate" id="contact-rate" class="rate{% if errors['rate'] is defined %} error{% endif %}" placeholder="Сумма тарифа" value="{% if memo['rate'] is defined %}{{ memo['rate'] }}{% else %}{{ contact['rate'] }}{% endif %}">
                        </div>
                        <div class="col-2 label-input" title="Обязательное поле">
                            <label for="contact-currency">Валюта *</label>
                            <select name="currency_id" id="contact-currency">
                                {% for currency in currencies %}
                                    {% if contact['currency_id'] == currency['currency_id'] %}
                                        <option value="{{ currency['currency_id'] }}" selected>{{ currency['currency'] }}</option>
                                    {% else %}
                                        {% if memo['currency_id'] == currency['currency_id'] %}
                                            <option value="{{ currency['currency_id'] }}" selected>{{ currency['currency'] }}</option>
                                        {% else %}
                                            <option value="{{ currency['currency_id'] }}">{{ currency['currency'] }}</option>
                                        {% endif %}
                                    {% endif %}
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12 label-input">
                            <label for="contact-description" title="НЕобязательное поле">Заметки / Описание</label>
                            <textarea name="description" id="contact-description" placeholder="Особенности ученика. Пожелания родителей. Цели и задачи.">{% if memo['description'] is defined %}{{ currency['description'] }}{% else %}{{ contact['description'] }}{% endif %}</textarea>
                        </div>
                    </div>
                </div>
                <div class="buttons">
                    <a href="#" class="contact-update">Сохранить</a>
                </div>
            </form>
        </div>
    </div>
{% endblock %}